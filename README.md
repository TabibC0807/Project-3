# Project-3
Project 3: Simulation Studies
PHP2550 Project 3

## Overview(from Dr. Alice Paul's canvas site):
This project is a collaboration with Dr. Jon Steingrimsson in the Biostatistics Department and focuses on evaluating a performance of a prediction model in a different population than it was originally developed and/or evaluated in. 

Users of prediction models are usually interested in using model-derived predictions in some target population. For example, a healthcare system may want to deploy a risk prediction model to identify individuals at high risk for cardiovascular events among all patients receiving care. The data used for prediction model development, referred to as the source study data, are often data from randomized trials, large observational databases, or prospective cohort studies. Such datasets are typically not a random sample from the target population. As a result, the target population and the population underlying the source study data differ. As an example, the Framingham ATP-III model is often used to predict 10-year risk of cardiovascular events. This model was built using source data that had predominantly white participants and the models have been shown to generalize poorly to multi-ethnic populations. 

In recent years, several methods have been developed to evaluate the performance of prediction models in a target population (or transporting measures of model performance from the source population to the target population). My goal is to apply these methods to a risk score model built using data from the Framingham heart study data and then estimate performance of that model in a population underlying the NHANES (National Health and Nutrition Examination Survey) survey data using a simulation study. As NHANES does not include long term outcome information, this involves using data from both NHANES and the Framingham Heart Study. In this project, I have used recent transport performance methods to evaluate the NHANES dataset in different settings. In addition, I conducted further simulation studies to compare how a simulated data might perform against an actual external dataset. 

## Objective
The main objective of this project is to perform transportability analysis on the NHANES dataset, and a simulated dataset to see how the framingham model performs outside the source data. Transportability analysis is required for our specific setting because we are attempting to address the critical challenges of assessing the performance of prediction models when applied to populations distinct from those in which they were originally developed. The source data here is the framingham data orginates from a 1948 study where the original goal of the Framingham Heart Study (FHS) was to identify common factors or characteristics that contribute to cardiovascular disease and it's been collected over generations from the city of Framingham, Massachussetts. The issue with this setting is that the city of Framingham, MA is predominantly white and thus it would be hard to generalize this study to a different setting. 

## Methods

In our project, we first perform Exploratory Data Analysis to observe patterns and differences between the source and target data. We find that there are significant differences between the two sets of data along with the problem of missing values in the target dataset. To solve this issue, we do multiple imputation and then perform transportability analysis using the mean squared error as the main metric of performance. The next part of the project involves simulating a second dataset which reqiured us to analyze the summary statistics, association and distributions of the common covariates between the framingham and the NHANES data. We then also performed transportability analysis on the simulated data and compared how the model performs on the actual NHANES data and the simulated NHANES data. 

## Conclusion
In conclusion, in this project we have first evaluated the model on the target population using the MSE as the main performance metric. We found that the model evaluates well on the framingham data achieving an MSE score of around 0.105. We then studied the associations and distributions of the common variables in the framingham data and used this to simulate a second dataset in the hope of mirroring the NHANES data. To inform the parameters of the distribution we used a summary table from the NHANES dataset that provided us with useful information such as the mean, standard deviation and proportions of the covariates. Using this datagenerating process, we simulated data considering both associations and no associations and also under different threshold values. We found that the model evaluates well on the NHANES data achieving an optimal MSE score of around 0.105, however it performs better on the simulated data.

Some limitations of my study is that I only considered one metric to evaluate the performance of the model evaluation on the target population. One metric I could have used is the AUC performance metric in transportability analysis(from the paper "Estimating the area under the ROC curve when transporting a prediction model to a target population"), however it has been proven difficult to implement. 

